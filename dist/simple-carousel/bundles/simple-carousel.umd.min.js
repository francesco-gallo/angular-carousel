!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs")):"function"==typeof define&&define.amd?define("simple-carousel",["exports","@angular/core","@angular/platform-browser","rxjs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["simple-carousel"]={},e.ng.core,e.ng.platformBrowser,e.rxjs)}(this,(function(e,t,n,r){"use strict";var i=function(){};i.width=220,i.decorators=[{type:t.Component,args:[{selector:"lib-generic-card",template:'<div class="outer-card">\n    <div class="card">\n        <ng-container *ngIf="model$ | async as model; else placeholderBlock">\n            <lib-single-card *ngIf="model.cardinality===\'single\'" [model]="model"></lib-single-card>\n            <lib-multiple-card *ngIf="model.cardinality===\'collection\'" [model]="model"></lib-multiple-card>\n        </ng-container>\n        <ng-template #placeholderBlock>\n            <lib-placeholder-card></lib-placeholder-card>\n        </ng-template>\n    </div>\n</div>',styles:[".outer-card{padding:10px}.card{background-color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}"]}]}];var o=function(){};o.decorators=[{type:t.Component,args:[{selector:"lib-placeholder-card",template:'  <div class="container">\n    <div class="image loading">\n    </div>\n    <div class="bars">\n      <div class="bar bar1 loading"></div>\n      <div class="bar bar2 loading"></div>\n    </div>\n  </div>',styles:['.container{height:220px;width:200px}.container .image{background:#e9ebee;height:100px}.container .bars{height:85px}.container .bars .bar{background:#e9ebee;height:19px;margin:0 13px 13px}.container .bars .bar1{margin-top:15px;width:80%}.container .bars .bar2{width:30%}.loading{overflow:hidden;position:relative}.loading:after{animation:loading-placeholder 1.5s ease-in-out infinite;background-color:#dddfe2;bottom:0;content:"";display:block;height:100%;position:absolute;top:0;transform:translateX(0);width:100%}@keyframes loading-placeholder{0%{transform:translateX(-100%)}to{transform:translateX(100%)}}']}]}];var a=function(){};a.decorators=[{type:t.Component,args:[{selector:"lib-single-card",template:'<div class="container">\n    <div class="upper">\n        <img class="image" src={{model.image}}/>\n        <span class="desc left">\n            {{model.type}}\n        </span>\n        <span *ngIf="model.duration" class="desc right">\n            {{model.duration | duration}}\n        </span>\n    </div>\n    <div class="lower">\n        <span class="title">{{model.title}}</span>\n        <span class="subtitle">{{model.subtitle}}</span>\n    </div>\n</div>',styles:[".container{height:220px;width:200px}.container .upper{position:relative}.container .upper .image{height:100px;overflow:hidden;width:-webkit-max-content;width:max-content}.container .upper .desc{background-color:rgba(50,50,50,.8);bottom:4px;color:#fff;font-size:x-small;font-weight:700;padding:3px 5px;position:absolute}.container .upper .desc.left{left:0;text-transform:uppercase}.container .upper .desc.right{right:0}.container .lower{padding:10px}.container .lower .title{color:#346262;display:block;font-size:small;font-weight:700;word-break:normal}.container .lower .subtitle{color:#6b7373;display:block;font-size:x-small;font-weight:700;margin-top:10px;word-break:normal}"]}]}],a.propDecorators={model:[{type:t.Input}]};Object.create;function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var l=function(){function e(e){this.resolver=e,this.currentIndex=0,this.mouseInside=!1,this.cardModels=[],this.windowSize=0,this.chunkSize=6,this.cardRefs=[],this.cardWidth=i.width,this.pendingLoadings=!1,this.init=!1}return e.prototype.ngOnInit=function(){this.refreshWindowSize(),this.fetchData(this.windowSize),this.init=!0},e.prototype.scrollCarousel=function(e){this.refreshWindowSize(),e<0?this.currentIndex=Math.max(0,this.currentIndex+e):e>0&&(this.currentIndex+=e,this.conditionalFetchData());var t=e>0;this.refreshCardModels(t),this.scrollable.nativeElement.scrollTo({left:t?0:this.cardWidth,behavior:"auto"}),this.scrollable.nativeElement.scrollTo({left:t?this.cardWidth:0,behavior:"smooth"})},e.prototype.conditionalFetchData=function(){this.pendingLoadings||this.currentIndex+this.windowSize>this.cardModels.length&&this.fetchData(this.chunkSize)},e.prototype.onMouseInside=function(e){this.mouseInside=e},e.prototype.fetchData=function(e){var t=this;if(this.fetchCards){var n=this.init;this.pendingLoadings=!0,this.fetchCards(e).then((function(e){var r;t.pendingLoadings=!1,(r=t.cardModels).push.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}(e)),t.refreshCardModels(n),t.conditionalFetchData()}))}},e.prototype.refreshCardInstances=function(e){if(this.container)if(e>0)for(var t=this.resolver.resolveComponentFactory(i),n=0;n<e;++n){var r=this.container.createComponent(t);this.cardRefs.push(r)}else for(n=0;n<-e;++n){this.cardRefs.pop().destroy()}},e.prototype.refreshWindowSize=function(){if(this.scrollable){var e=Math.ceil(this.scrollable.nativeElement.getBoundingClientRect().width/this.cardWidth)+1;this.windowSize!==e&&this.refreshCardInstances(e-this.windowSize),this.windowSize=e}},e.prototype.refreshCardModels=function(e){void 0===e&&(e=!1);for(var t=0;t<this.cardRefs.length;++t){var n=t+this.currentIndex+(e?-1:0);this.cardRefs[t].instance.model$=r.of(this.cardModels[n])}},e}();l.decorators=[{type:t.Component,args:[{selector:"lib-carousel",template:'<div class="carousel">\n    <div class="header">\n        <div class="icon" *ngIf="icon">\n            <img class="icon-image" src={{icon}} />\n        </div>\n        <div class="description">\n            <span class="title">{{title}}</span>\n            <span class="subtitle">{{subtitle}}</span>\n        </div>\n    </div>\n\n    <div class="wrapper" (mouseenter)="onMouseInside(true)" (mouseleave)="onMouseInside(false)">\n        <div #scrollable class="container">\n            <template #container></template>\n        </div>\n\n        <div *ngIf="mouseInside && currentIndex>0" class="prev" (click)="scrollCarousel(-1)">\n            <div class="scroll-img">\n                <span><</span>\n            </div>\n        </div>\n        <div class="next" *ngIf="mouseInside" (click)="scrollCarousel(1)">\n            <div class="scroll-img">\n                <span class="">></span>\n            </div>\n        </div>\n    </div>\n</div>',styles:[".carousel{background-color:#d3d3d3;padding:10px}.carousel .header{align-items:center;display:flex}.carousel .header .icon{background-color:#6887b3;border-radius:10px;height:50px;margin-right:10px;padding:5px;width:50px}.carousel .header .icon .icon-image{max-height:100%;max-width:100%}.carousel .header .description .title{color:#6887b3;display:block}.carousel .header .description .subtitle{color:grey;display:block;font-size:small;margin-top:5px}.carousel .wrapper{margin-top:10px;position:relative}.carousel .wrapper .container{display:flex;overflow-x:hidden}.carousel .wrapper .prev{left:0}.carousel .wrapper .next,.carousel .wrapper .prev{background-color:hsla(0,0%,43.5%,.8);height:-webkit-fill-available;position:absolute;top:0;width:50px}.carousel .wrapper .next{right:0}.carousel .wrapper .scroll-img{-webkit-font-smoothing:antialiased;-webkit-user-select:none;color:#fff;font-size:x-large;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);user-select:none}"]}]}],l.ctorParameters=function(){return[{type:t.ComponentFactoryResolver}]},l.propDecorators={title:[{type:t.Input}],subtitle:[{type:t.Input}],icon:[{type:t.Input}],fetchCards:[{type:t.Input}],container:[{type:t.ViewChild,args:["container",{read:t.ViewContainerRef,static:!0}]}],scrollable:[{type:t.ViewChild,args:["scrollable",{read:t.ElementRef,static:!0}]}]};var c=function(){function e(){}return e.prototype.transform=function(e){var t="";e/=1e3,e=Math.floor(e);var n=Math.floor(e/60);if(e<3600){var r=e-60*n;t=r<10?n+":0"+r:n+":"+r}else{var i=Math.floor(n/60);t=i+"h "+(n-=60*i)+"m"}return t},e}();c.decorators=[{type:t.Pipe,args:[{name:"duration"}]}];var d=function(){};d.decorators=[{type:t.Component,args:[{selector:"lib-multiple-card",template:'<div class="container">\n        <div class="fake-card-3"></div>\n        <div class="fake-card-2"></div>\n        <div class="fake-card-1"></div>\n    <div class="real-card">\n        <lib-single-card [model]="model"></lib-single-card>\n    </div>\n</div>',styles:[".container{height:220px;position:relative;width:200px}.container .fake-card-1{height:101%;left:2%;width:96%}.container .fake-card-1,.container .fake-card-2{background-color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);position:absolute;top:0}.container .fake-card-2{height:102%;left:4%;width:92%}.container .fake-card-3{background-color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);height:103%;left:6%;position:absolute;top:0;width:88%}.container .real-card{background-color:#fff;height:100%;position:absolute;top:0;width:100%}"]}]}],d.propDecorators={model:[{type:t.Input}]};var p,h,f=function(){};f.decorators=[{type:t.NgModule,args:[{declarations:[i,a,o,l,c,d],imports:[n.BrowserModule],exports:[l]}]}],(p=e.cardCardinality||(e.cardCardinality={})).single="single",p.collection="collection",(h=e.cardType||(e.cardType={})).elearning="elearning",h.video="video",h.learning_plan="learning_plan",h.playlist="playlist";var u=function(){};e.CardModel=u,e.CarouselComponent=l,e.SimpleCarouselModule=f,e.ɵa=i,e.ɵb=a,e.ɵc=o,e.ɵd=c,e.ɵe=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=simple-carousel.umd.min.js.map